<aura:component description="Guarantor of Application" access="global" controller="TC_LoanApplicationCtrl"
                implements="forceCommunity:availableForAllPageTypes,force:hasRecordId,flexipage:availableForRecordHome">

    <aura:attribute name="guarantors" type="List" access="global" default="[]"/>
    <aura:attribute name="company" type="Account" access="global"/>

    <aura:registerEvent name="appNavEvent" type="c:tc_applicationNavigation_evt"/>

    <aura:handler value="{!this}" name="init" action="{!c.doInit}"/>

    <div class=" slds-m-around_small slds-small-size_1-of-1 slds-large-size_1-of-3">
        <lightning:button label="Add" iconName="utility:add" onclick="{!c.addGuarantor}" variant="neutral"/>
        <lightning:button label="Save" onclick="{!c.quickSave}" variant="brand" iconName="utility:save" iconPosition="left" value="{!v.guarantors}"/>
        <lightning:button label="Next" onclick="{!c.goToNext}" variant="brand" iconName="utility:forward" iconPosition="right" aura:id="nextButton"/>
    </div>

    <aura:iteration var="guar" items="{!v.guarantors}" indexVar="i">
            <span>
                <c:tc_dealGuarantorDetail guarantor="{!guar}" index="{!i}" company="{!v.company}"/>
                
                <div class="slds-p-around_x-small slds-small-size_1-of-1 slds-large-size_1-of-3">
                    <lightning:button label="{!'Clear Guarantor ' + (i+1)}" iconName="utility:clear" onclick="{!c.clearItem}" value="{!i}" class="slds-m-left_small"/>
                    <aura:if isTrue="{!i!=0}">
                        <lightning:button label="{!'Remove Guarantor ' + (i+1)}" iconName="utility:delete" onclick="{!c.deleteItem}" value="{!i}" class="slds-m-left_small"/>
                    </aura:if>
                </div>
            </span>
    </aura:iteration>

    <div class=" slds-m-around_small slds-small-size_1-of-1 slds-large-size_1-of-3">
        <lightning:button label="Add" iconName="utility:add" onclick="{!c.addGuarantor}" variant="neutral"/>
        <lightning:button label="Save" onclick="{!c.quickSave}" variant="brand" iconName="utility:save" iconPosition="left" value="{!v.guarantors}"/>
        <lightning:button label="Next" onclick="{!c.goToNext}" variant="brand" iconName="utility:forward" iconPosition="right" aura:id="nextButton"/>
    </div>
    <lightning:spinner aura:id="spinner" class="slds-hide"/>
</aura:component>