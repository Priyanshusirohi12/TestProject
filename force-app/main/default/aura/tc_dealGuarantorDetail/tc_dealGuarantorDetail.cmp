<!--
 - Created  on 1/1/18.
 -->

<aura:component description="tc_dealGuarantorDetail" controller="TC_LoanApplicationCtrl">
    <aura:attribute name="guarantor" type="Contact" default="{MailingCountryCode : 'US'}"/>
    <aura:attribute name="index" type="Integer"/>
    <aura:attribute name="company" type="Account" access="global"/>

    <aura:handler name="lookupChoose" event="c:tc_inputLookupChoose_evt" action="{!c.handleLookupChoose}"
                  description="Event handler to get the selected record from LookupItem component."/>

    <c:tc_accordionSection title="{!'Principal / Personal Guarantor ' + (v.index + 1) + ' Details'
    + (if (v.guarantor.FirstName || v.guarantor.LastName, ' - ' + v.guarantor.FirstName + ' ' + v.guarantor.LastName, ''))}">


        <div class="slds-grid slds-wrap">

            <aura:if isTrue="{!!v.isGuest}">
            <div class="slds-p-around_x-small slds-x-small-size_1-of-1 slds-large-size_1-of-1">
                <c:tc_lookupInput fieldLabel="Search Guarantor"
                                  objectAPIName="Contact"
                                  subHeadingFieldsAPI="SSN__c"
                                  showLabel="false"
                                  placeholder="Search Guarantor"
                                  chosenRecordLabel="{#v.guarantor.Name}"
                                  chosenRecordId="{!v.guarantor.Id}"
                                  aura:id="guarlookupid"
                                  showCreateNew="true"
                                  itemIndex="{!v.index}"
                                  filter="{!'AccountId=\'' + v.company.Id + '\''}"
                                  iconCategoryName="standard:contact"/>
            </div>
            </aura:if>
            <lightning:input value="{!v.guarantor.FirstName}" name="FirstName" label="First Name"
                             class="slds-p-around_x-small slds-x-small-size_1-of-1 slds-large-size_1-of-3" type="text"/>
            <lightning:input value="{!v.guarantor.LastName}" name="lastName" label="Last Name"
                             class="slds-p-around_x-small slds-x-small-size_1-of-1 slds-large-size_1-of-3" type="text"/>

            <c:tc_inputTaxId value="{!v.guarantor.SSN__c}" name="ssn" label="SSN"
                             class="slds-p-around_x-small slds-x-small-size_1-of-1 slds-large-size_1-of-3" entityType="person"/>

            <!--<lightning:input value="" name="personalGuarantorAddress" label="Personal Guarantor Address"  class="slds-p-around_x-small slds-x-small-size_1-of-1 slds-large-size_1-of-1" type="text"/>-->
            <c:tc_addressLookup class="slds-p-around_x-small slds-x-small-size_1-of-1 slds-large-size_2-of-3"
                                street="{!v.guarantor.MailingStreet}"
                                city="{!v.guarantor.MailingCity}"
                                stateCode="{!v.guarantor.MailingStateCode}"
                                postalCode="{!v.guarantor.MailingPostalCode}"
                                countryCode="{!v.guarantor.MailingCountryCode}"
                                placeholder="Personal Guarantor Address"/>

            <lightning:input aura:id="sameAsCompanyAddress" label="Same as Company Address" onchange="{!c.handleSameAddress}"
                             class="slds-p-around_small slds-x-small-size_1-of-1 slds-large-size_1-of-3" type="checkbox"/>
            <lightning:input value="{!v.guarantor.MailingStreet}" name="street" label="Street"
                             class="slds-p-around_x-small slds-x-small-size_1-of-1 slds-large-size_1-of-3" type="text"/>
            <lightning:input value="{!v.guarantor.MailingCity}" name="city" label="City"
                             class="slds-p-around_x-small slds-x-small-size_1-of-1 slds-large-size_1-of-3" type="text"/>
            <div class="slds-p-around_x-small slds-x-small-size_1-of-1 slds-large-size_1-of-8">
                <c:tc_inputSelect objInfo="{!v.guarantor}" fldInfo="MailingStateCode" label="State" value="{!v.guarantor.MailingStateCode}"/>
            </div>
            <lightning:input value="{!v.guarantor.MailingPostalCode}" name="postalCode" label="Postal Code"
                             class="slds-p-around_x-small slds-x-small-size_1-of-1 slds-large-size_1-of-8" type="text"/>
            <lightning:input value="{!v.guarantor.Phone}" name="phone" label="Phone"
                             class="slds-p-around_x-small slds-x-small-size_1-of-1 slds-large-size_1-of-3" type="text"/>
            <lightning:input value="{!v.guarantor.MobilePhone}" name="mobilePhone" label="Mobile Phone"
                             class="slds-p-around_x-small slds-x-small-size_1-of-1 slds-large-size_1-of-3" type="text"/>
            <lightning:input value="{!v.guarantor.Email}" name="emailAddress" label="Email Address"
                             class="slds-p-around_x-small slds-x-small-size_1-of-1 slds-large-size_1-of-3" type="email"/>
            <lightning:input value="{!v.guarantor.Is_US_Citizen__c}" name="usCitizen" label="Is a US Citizen?" class="slds-p-around_x-small slds-x-small-size_1-of-1 slds-large-size_1-of-3" type="checkbox"/>
            <!--<div class="slds-p-around_x-small slds-x-small-size_1-of-1 slds-large-size_1-of-3">-->
                <!--<c:tc_inputSelect objInfo="{!v.guarantor}" fldInfo="Is_US_Citizen__c" label="Is a US Citizen?" value="{!v.guarantor.Is_US_Citizen__c}"/>-->
            <!--</div>-->
            <div class="slds-p-around_x-small slds-x-small-size_1-of-1 slds-large-size_1-of-3">
                <lightning:input value="{!v.guarantor.Guarantor_Ownership__c}" name="percentOwnership" label="Percent Ownership"
                                 type="number" step="1" min="1" max="100"/>
            </div>
            <div class="slds-p-around_x-small slds-x-small-size_1-of-1 slds-large-size_1-of-3">
                <lightning:input value="{!v.guarantor.Guarantor_Annual_Income__c}" name="annualIncome" label="Annual Income"
                                 type="number" formatter="currency"/>
            </div>
            <div class="slds-p-around_x-small slds-x-small-size_1-of-1 slds-large-size_1-of-3">
                <c:tc_inputSelect objInfo="{!v.guarantor}" fldInfo="Rent_Own__c" label="Rent/Own" value="{!v.guarantor.Rent_Own__c}"/>
            </div>
            <div class="slds-p-around_x-small slds-x-small-size_1-of-1 slds-large-size_1-of-3 slds-form-element">
                <label class="slds-form-element__label">Birthdate</label>
                <div class="slds-form-element__control">
                    <ui:inputDate displayDatePicker="true" value="{!v.guarantor.Birthdate}" format="MM/dd/yyyy"/>
                </div>
            </div>
            <!--<div class="slds-p-around_x-small slds-x-small-size_1-of-1 slds-large-size_1-of-3">-->
            <!--<c:tc_inputSelect objInfo="{!v.guarantor}" fldInfo="LASERCA__Request_Credit_Bureau__c" label="Credit Release Obtained?" value="{!v.guarantor.LASERCA__Request_Credit_Bureau__c}"/>-->
            <!--</div>-->
        </div>

    </c:tc_accordionSection>

    <lightning:spinner aura:id="spinner" class="slds-hide"/>
</aura:component>